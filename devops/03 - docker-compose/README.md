## Prerequsite

Docker 19.03 or greater

Docker-compose 1.26 or greater

## Legend

Docker compose with 3 applications (frontend + backend + DB).

### Instructions for running

1. Bootstrap the DB:

`docker-compose up -d db`

`docker-compose run --rm flaskapp /bin/bash -c "cd /opt/services/flaskapp/src && python -c  'import database; database.init_db()'"`

2. Boot up the cluster

`docker-compose up -d`

3. Browse to localhost:8080 to see the app in action.

## Questions

1. What is the difference between Docker Compose and dockerfile? Why do I need Docker Compose?
docker-compose is a tool for defining and running multi-container applications, while Dockerfile contains instructions to build an image. docker-compose defines services needed for an app to run it in an isolated environment.

2. How do I parameterize compose for different environments?
docker-compose automatically looks for .env file if variables are specified in the docker-compose.yml. It can also be specified explicitly as 'env_file' or passed as option '--env-file=FILE'. Environment variables can also be set with 'docker-compose run' as 'docker-compose run -e VAR=VAL'.

3. What types of entities are used in docker-compose and for what purpose?
Services - services that make up an app, in this case Postgresql database, Flask app and nginx.
Volumes - make persistent data generated by and used by Docker containers.
Networks - define a way for services to connect to each other.

4. `*` How to output application logs?
docker service logs

4. `*` How to copy\upload a file from host machine to the container?
docker cp FILE container_id:/FILE

5. `*` How to save file changes made inside the container?


## Tasks

* Docker-compose has a bug - investigate it! What would you improve?
Didn't find any, sorry.

* Docker-compose with an environment file. Create 2 different environment files for docker-compose
Done.

* `*` Change the `docker-compose.yml` to run through dockerstack with code reuse (don't repeat yourself)

